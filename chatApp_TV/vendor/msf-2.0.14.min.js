var msf=function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i,s=n(1);s.version="{{version}}",i=function(){return s}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)),e.exports=s},function(e,t,n){"use strict";var i=n(5),s=(n(2),n(3)),r=n(4),o=null;e.exports.logger=i.logger,e.exports.search=function(e){return o||(o=new r),e&&(o.once("found",function(t){e(null,t)}),setTimeout(function(){o.start()},0)),o},e.exports.local=function(e){s.getLocal(e)},e.exports.remote=function(e,t){s.getByURI(e,t)}},function(e,t,n){"use strict";function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._disabledEvents={},i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,r,a,l;if(this._events||(this._events={}),this._disabledEvents[e])return!1;if("error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],c(n))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,r=new Array(i-1),a=1;i>a;a++)r[a-1]=arguments[a];n.apply(this,r)}else if(o(n)){for(i=arguments.length,r=new Array(i-1),a=1;i>a;a++)r[a-1]=arguments[a];for(l=n.slice(),i=l.length,a=0;i>a;a++){var u=l[a].apply(this,r);if("stopEvent"===u)break}}return!0},i.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=c(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},i.prototype.on=function(e,t){i.prototype.addListener.apply(this,arguments)},i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,r,c;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],r=n.length,i=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(c=r;c-->0;)if(n[c]===t||n[c].listener&&n[c].listener===t){i=c;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.off=function(e,t){i.prototype.removeListener.apply(this,arguments)},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],s(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.disableEvent=function(e){e&&"string"==typeof e&&(this._disabledEvents[e]=!0)},i.prototype.enableEvent=function(e){e&&"string"==typeof e&&delete this._disabledEvents[e]},i.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?s(e._events[t])?1:e._events[t].length:0}},function(e,t,n){"use strict";function i(e){this.id=e.id,this.name=e.name,this.version=e.version,this.type=e.type,this.uri=e.uri,this.device=e.device,r.readOnly(this,["id","name","version","type","uri","device"])}var s=n(5),r=s.props,o=n(6),c=n(7);i.prototype.application=function(e,t){return new o(this,e,t)},i.prototype.channel=function(e){return new c(this,e)},i.getLocal=function(e){i.getByURI("http://127.0.0.1:8001/api/v2/",e)},i.getByURI=function(e,t){var n=new XMLHttpRequest;n.timeout=5e3,n.ontimeout=function(){t()},n.onload=function(){if(200===this.status)try{var e=JSON.parse(this.responseText);t(null,new i(e))}catch(n){t(n)}else t()},n.open("get",e,!0),n.send()},e.exports=i},function(e,t,n){"use strict";function i(){i.super_.call(this),this.discoveryFrame=null,this.status=i.STATUS_STOPPED;var e=this,t=document.createElement("iframe");t.setAttribute("width","1"),t.setAttribute("height","1"),t.style.display="none",t.src="http://multiscreen.samsung.com/discoveryservice/v2/discover",document.body.appendChild(t),this.windowMessageListener=function(s){if(s.source===t.contentWindow)if(s.data&&"discovery.ready"===s.data.event)e.discoveryFrame=s.source,e.onSearchReady();else if(s.data&&"discovery.result"===s.data.event){for(var r=[],o=n(3),c=0;c<s.data.result.length;c++)r.push(new o(s.data.result[c]));e.onSearchResult(r)}else s.data&&"discovery.error"===s.data.event&&(e.onSearchError(s.data.error),this.status=i.STATUS_STOPPED)},window.addEventListener("message",this.windowMessageListener),r["private"](this,["discoveryFrame","windowMessageListener"])}var s=n(5),r=s.props,o=n(2);s.inherits(i,o),i.STATUS_STOPPED="stopped",i.STATUS_STARTED="started",i.prototype.start=function(){if(this.status===i.STATUS_STOPPED){if(this.discoveryFrame)this.discoveryFrame.postMessage({method:"discovery.search"},"*");else{var e=this;this.once("ready",function(){e.discoveryFrame.postMessage({method:"discovery.search"},"*")})}this.onSearchStart()}else console.warn("a previous search is already in progress")},i.prototype.stop=function(){this.onSearchStop()},i.prototype.onSearchResult=function(e){this.status!==i.STATUS_STOPPED&&this.emit("found",e),this.status=i.STATUS_STOPPED},i.prototype.onSearchError=function(e){this.emit("error",e),this.status=i.STATUS_STOPPED},i.prototype.onSearchStart=function(){this.status=i.STATUS_STARTED,this.emit("start",this)},i.prototype.onSearchStop=function(){this.status=i.STATUS_STOPPED,this.emit("stop",this)},e.exports=i},function(e,t,n){e.exports={logger:n(8),url:n(9),inherits:n(10),props:n(11),types:n(12),queryString:n(13)}},function(e,t,n){"use strict";function i(e,t,n){if(!o.isObject(e))throw new TypeError("service must be of type Service");if(!o.isString(t))throw new TypeError("id must be a valid string");if(!o.isString(n))throw new TypeError("channelId must be a valid string");this.type=t.match(/(file:\/\/|http(s)?:\/\/)/gim)?u:l,i.super_.call(this,e,n),this.id=t,this.service=e,this.on("clientDisconnect",function(e){e.isHost&&this.disconnect()}.bind(this)),this.disableEvent("connect"),c.readOnly(this,"id"),c["private"](this,"type","service")}var s=n(5),r=s.logger,o=s.types,c=s.props,a=n(7),l="applications",u="webapplication";s.inherits(i,a),i.prototype.connect=function(e,t){a.prototype.connect.call(this,e,function(e,n){this.once("ready",function(){t&&(r.debug("application.connect->callback",null,n),t(null,n),t=null),r.debug('application.emit("connect")',n),this.enableEvent("connect"),this.emit("connect",n),this.disableEvent("connect")}.bind(this));var i=function(e){r.debug("application->startCallback",e),e&&t&&(t(e),t=null)}.bind(this);"webapplication"===this.type?this.invoke("ms.webapplication.start",{url:this.id},i):this.invoke("ms.application.start",{id:this.id},i)}.bind(this))},i.prototype.disconnect=function(e,t){if(o.isFunction(e)&&(t=e,e=!0),o.isUndefined(e)&&(e=!0),e&&this.clients.length<=2){var n=function(e){a.prototype.disconnect.call(this,t)}.bind(this);"webapplication"===this.type?this.invoke("ms.webapplication.stop",{url:this.id},n):this.invoke("ms.application.stop",{id:this.id},n)}else a.prototype.disconnect.call(this,t)},i.prototype.install=function(e){if(this.type===u)return e(new Error("web application cannot be installed"));var t,n=new XMLHttpRequest;n.timeout=5e3,n.ontimeout=function(){t=new Error("Request Timeout"),t.code=408,e(t)},n.onload=function(){200===this.status?e(null,!0):(t=new Error(this.statusText),t.code=this.status,e(t))},n.open("get",this.service.uri+"applications/"+this.id,!0),n.send()},e.exports=i},function(e,t,n){"use strict";function i(e,t){if(r.debug("new Channel",arguments),!o.isObject(e))throw new TypeError("service must be of type Service");if(!o.isString(t))throw new TypeError("uri must be a valid string");i.super_.call(this);var n=this,a=s.url.parse(e.uri);this.clients=new u(this),Object.defineProperty(this,"isConnected",{get:function(){return n.connection&&1===n.connection.readyState}}),this.clientId=null,this.connection=null,this.resultHandlers={},this.connectionUrl="ws://"+a.host+a.pathname+"channels/"+t,c.readOnly(this,["clients"]),c["private"](this,["clientId","connection","resultHandlers","connectionUrl","connectCallback"])}var s=n(5),r=s.logger,o=s.types,c=s.props,a=n(2),l=n(14),u=n(15);s.inherits(i,a),i.prototype.invoke=function(e,t,n,s,c){if(r.debug("channel.invoke",arguments),!this.isConnected)throw new Error("the channel is disconnected");if(!o.isString(e))throw new TypeError("method must be a valid string");t=t||{};var a={method:e,params:t};n&&!s&&(a.id=Date.now(),this.resultHandlers[a.id]=n),a=c?i.packMessage(a,c):JSON.stringify(a),this.connection.send(a)},i.prototype.connect=function(e,t){if(r.debug("channel.connect",arguments),o.isFunction(e)&&!t?(t=e,e={}):e=e||{},!o.isObject(e))throw new TypeError("attributes must be a valid object");if(t&&!o.isFunction(t))throw new TypeError("callback must be a valid function");if(this.isConnected)return console.warn("Channel is already connected.");this.connectCallback=t;var n=this.connectionUrl+"?"+s.queryString.stringify(e);this.connection&&(this.connection.onopen=null,this.connection.onerror=null,this.connection.onclose=null,this.connection.onmessage=null),this.connection=new WebSocket(n),this.connection.binaryType="arraybuffer",this.connection.onopen=this._onSocketOpen.bind(this),this.connection.onerror=this._onSocketError.bind(this),this.connection.onclose=this._onSocketClose.bind(this),this.connection.onmessage=this._onSocketMessage.bind(this)},i.prototype.disconnect=function(e){r.debug("channel.disconnect",arguments),this.isConnected||console.warn("the channel is already disconnected"),this.connection.close();var t=this;setTimeout(function(){e&&e(null,t)},0)},i.prototype.publish=function(e,t,n,i){if(r.silly("channel.publish",arguments),n=n||"broadcast",t=t||null,!this.isConnected)throw new Error(" the channel is not connected");if(!o.isString(e))throw new TypeError("event must be a valid string");if(!o.isString(n)&&!o.isArray(n))throw new TypeError("targets must be a valid string or array");this.invoke("ms.channel.emit",{event:e,data:t,to:n},null,!0,i)},i.packMessage=function(e,t){r.debug("channel.packMessage",arguments);var n=JSON.stringify(e),i=new Blob([n]).size,s=new ArrayBuffer(2),o=new DataView(s);return o.setUint16(0,i),new Blob([s,n,t])},i.unpackMessage=function(e){r.debug("channel.unpackMessage",arguments);for(var t="",n=new DataView(e),i=n.getUint16(0),s=0;i>s;s++)t+=String.fromCharCode(n.getUint8(s+2));var o=e.slice(2+i),c=JSON.parse(t);return{payload:o,message:c}},i.prototype._onConnect=function(e){r.silly("channel._onSocketOpen"),this.clientId=e.id,e.clients.forEach(function(e){var t=new l(e.id,e.attributes,e.isHost);this.clients.push(t)},this),this.connectCallback&&(r.debug("channel.connect->callback",this.clients.me),this.connectCallback(null,this.clients.me),this.connectCallback=null),r.debug('channel.emit("connect")',this.clients.me),this.emit("connect",this.clients.me)},i.prototype._onClientConnect=function(e){r.silly("channel._onSocketOpen");var t=new l(e.id,e.attributes,e.isHost);this.clients.push(t),r.debug('channel.emit("clientConnect")',t),this.emit("clientConnect",t)},i.prototype._onClientDisconnect=function(e){r.silly("channel._onSocketOpen");var t=this.clients.getById(e.id);t?this.clients.remove(t):(r.warn("client "+e.id+" could not be found, so it was not removed from the client list"),t=new l(e.id,e.attributes,e.isHost)),r.debug('channel.emit("clientDisconnect")',t),this.emit("clientDisconnect",t)},i.prototype._onReady=function(e){r.debug('channel.emit("ready")'),this.emit("ready")},i.prototype._onUserEvent=function(e){var t=this.clients.getById(e.from),n=e.event,i=e.data,s=e.payload;r.debug('channel.emit("'+n+'")',i,t,s),this.emit(n,i,t,s)},i.prototype._onSocketOpen=function(){r.silly("channel._onSocketOpen")},i.prototype._onSocketClose=function(){r.silly("channel._onSocketClose");var e=this.clients.me;this.clients.clear(),this.emit("disconnect",e)},i.prototype._onSocketError=function(e){r.silly("channel._onSocketError",e),this.emit("error",new Error("WebSocket error"))},i.prototype._onSocketMessage=function(e){r.silly("channel._onSocketMessage",e);try{if("string"==typeof e.data)e=JSON.parse(e.data);else{var t=i.unpackMessage(e.data);e=t.message,e.payload=t.payload}}catch(n){return void r.warn("unable to parse message",e)}if(e.id&&(e.result||e.error)){if(!this.resultHandlers[e.id])return void r.warn("unable to find result handler for result message ",e);this.resultHandlers[e.id](e.error,e.result)}else if(e.event)switch(e.event){case"ms.channel.connect":this._onConnect(e.data);break;case"ms.channel.clientConnect":this._onClientConnect(e.data);break;case"ms.channel.clientDisconnect":this._onClientDisconnect(e.data);break;case"ms.channel.ready":this._onReady(e.data);break;default:this._onUserEvent(e)}else r.warn("unrecognized message type",e)},e.exports=i},function(e,t,n){"use strict";function i(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e),r.log.apply(r,t)}}for(var s=["error","warn","info","verbose","debug","silly"],r={level:"disabled",log:function(e){if("disabled"!==r.level&&s.indexOf(e)<=s.indexOf(r.level)){var t=Array.prototype.slice.call(arguments,1);t.unshift("[MSF:"+e.toUpperCase()+"]"),console[e]?console[e].apply(console,t):console.log.apply(console,t)}}},o=0;o<s.length;o++){var c=s[o];r[c]=i(c)}e.exports=r},function(e,t,n){"use strict";var i=n(13),s={isValid:function(e){var t=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;return e.match(t)?!0:!1},parse:function(e){var t={},n=document.createElement("a");return n.href=e,t.href=n.href,t.protocol=n.protocol,t.hostname=n.hostname,t.port=n.port,t.pathname=n.pathname,t.search=n.search,t.hash=n.hash,t.host=n.host,t.queryString=i.parse(n.search),t}};e.exports=s},function(e,t,n){"use strict";"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function i(e,t,n,i){return{enumerable:e,configurable:t,writable:n,value:i}}e.exports={readOnly:function(e,t){Array.isArray(t)?t.forEach(function(t){Object.defineProperty(e,t,i(!0,!0,!1,e[t]))}):Object.defineProperty(e,t,i(!0,!0,!1,e[t]))},"private":function(e,t){Array.isArray(t)?t.forEach(function(t){Object.defineProperty(e,t,i(!1,!0,!0,e[t]))}):Object.defineProperty(e,t,i(!1,!0,!0,e[t]))}}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isNull:function(e){return null===e},isBoolean:function(e){return"boolean"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:function(e){return e===Object(e)},isArray:function(e){return e.constructor===Array},isFunction:function(e){return"function"==typeof e},isUndefined:function(e){return"undefined"==typeof e}}},function(e,t,n){"use strict";/*!
	 query-string
	 Parse and stringify URL query strings
	 https://github.com/sindresorhus/query-string
	 by Sindre Sorhus
	 MIT License
	 */
var i={};i.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#)/,""),e?e.trim().split("&").reduce(function(e,t){var n=t.replace(/\+/g," ").split("="),i=n[0],s=n[1];return i=decodeURIComponent(i),s=void 0===s?null:decodeURIComponent(s),e.hasOwnProperty(i)?Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]:e[i]=s,e},{}):{})},i.stringify=function(e){return e?Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):encodeURIComponent(t)+"="+encodeURIComponent(n)}).join("&"):""},e.exports=i},function(e,t,n){"use strict";function i(e,t,n,i){if(!r.isString(e))throw new TypeError("id must be a valid string");if(t&&!r.isObject(t))throw new TypeError("attributes must be a valid object");this.id=e,this.attributes=t||{},this.isHost=n,this.connectTime=i||Date.now(),Object.freeze(this.attributes),Object.freeze(this)}var s=n(5),r=s.types;e.exports=i},function(e,t,n){"use strict";function i(e){if(!r.isObject(e))throw new TypeError("channel must be of type Channel");this.channel=e,i.super_.call(this)}var s=n(5),r=s.types;s.inherits(i,Array),Object.defineProperty(i.prototype,"me",{get:function(){return this.getById(this.channel.clientId)}}),i.prototype.clear=function(){this.length=0},i.prototype.remove=function(e){var t=this.indexOf(e);return-1!==t?(this.splice(t,1),e):null},i.prototype.getById=function(e){if(!r.isString(e)&&!r.isNumber(e))throw new TypeError("id must be a valid string or number");for(var t=0;t<this.length;t++)if(this[t].id===e)return this[t];return null},e.exports=i}]);
//# sourceMappingURL=msf-2.0.14.min.js.map